<!doctype html><html class=no-js lang=en-us>
<head>
<meta charset=utf-8>
<title>Votes, scores e ranks | Júlio César Batista</title>
<meta http-equiv=x-ua-compatible content="ie=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=stylesheet href=https://juliocesarbatista.com/css/foundation.min.css>
<link rel=stylesheet href=https://juliocesarbatista.com/css/highlight.min.css>
<link rel=stylesheet href=https://juliocesarbatista.com/css/font-awesome.min.css>
<link rel=stylesheet href=https://juliocesarbatista.com/css/academicons.min.css>
<link rel=stylesheet href=https://juliocesarbatista.com/css/fonts.css>
<link rel=stylesheet href=https://juliocesarbatista.com/css/finite.css>
</head>
<body>
<header>
<nav class=nav-bar>
<div class=title-bar data-responsive-toggle=site-menu data-hide-for=medium>
<button class=site-hamburger type=button data-toggle>
<i class="fa fa-bars fa-lg" aria-hidden=true></i>
</button>
<div class="title-bar-title site-title">
<a href=https://juliocesarbatista.com/>Júlio César Batista</a>
</div>
<div class="title-bar-right pull-right">
</div>
</div>
<div class=top-bar id=site-menu>
<div class="top-bar-title show-for-medium site-title">
<a href=https://juliocesarbatista.com/>Júlio César Batista</a>
</div>
<div class=top-bar-left>
<ul class="menu vertical medium-horizontal">
<li><a href=https://juliocesarbatista.com/publication/>Publicações</a></li>
<li><a href=https://juliocesarbatista.com/post/>Blog</a></li>
<li><a href=https://juliocesarbatista.com/logbook/>Recursos</a></li>
</ul>
</div>
<div class="top-bar-right show-for-medium">
</div>
</div>
</nav>
</header>
<main>
<div class=row>
<div class="column small-12 medium-10 medium-offset-1 end large-8 large-offset-0">
<article class=article itemscope itemtype=http://schema.org/Article>
<h1 itemprop=name>Votes, scores e ranks</h1>
<div class=post-metadata>
<span class=post-date>
<time datetime="2019-05-10 00:00:00 +0000 UTC" itemprop=datePublished>
2019/05/10
</time>
</span>
<span class=post-categories>
<span class=nowrap>
<a href=https://juliocesarbatista.com/categories/an%c3%a1lise-de-dados>Análise de dados</a>
</span>
</span>
<span class=post-tags>
<span class=nowrap><i class="fa fa-tags"></i>
<a href=https://juliocesarbatista.com/tags/ordena%c3%a7%c3%a3o-topol%c3%b3gica>Ordenação topológica</a>
,
<a href=https://juliocesarbatista.com/tags/elo-ranking>Elo Ranking</a>
,
<a href=https://juliocesarbatista.com/tags/arrows-impossibility-theorem>Arrow's Impossibility Theorem</a>
,
<a href=https://juliocesarbatista.com/tags/bordas-method>Borda's method</a>
,
<a href=https://juliocesarbatista.com/tags/icc31>ICC(3,1)</a>
</span>
</span>
</div>
<div class=post-body itemprop=articleBody>
<p><em>Votes</em>, <em>scores</em> e <em>ranks</em> são, normalmente, utilizados em conjunto.
Por exemplo, <em>scores</em> são funções utilizadas para reduzir dados multi-dimensionais para uma única dimensão.
Com base nesse <em>score</em>, é possível ordenar os dados através de um <em>rank</em>.
Assim, é possível acessar o <em>n</em>-ésimo elemento a partir de um <em>rank</em>.
<em>Votes</em>, é um dos exemplos que pode ser reduzido a partir de uma função <em>score</em>.</p>
<p>Um exemplo comum é o <em>ranking</em> de produtos em uma página baseado na avaliação dos usuários.
Nesse caso, a avaliação dos usuários são os <em>votes</em>.
A partir destes, um <em>score</em> (normalmente a média,
<a href=http://www.evanmiller.org/how-not-to-sort-by-average-rating.html>que não é uma boa opção</a>)
é calculado.
Finalmente, os produtos são apresentados em um <em>ranking</em> com base no <em>score</em>.</p>
<p>Outros exemplos incluem o <em>ranking</em> de resultados de busca.
Nesse cenário, mais detalhes podem ser levados em consideração e a função <em>score</em> pode ser probabilística.
Por exemplo:
$$
P(X) = P_r(X) \times P_c(X) \times P_l(X)
$$</p>
<p><strong>Em português</strong>: O <em>score</em> de uma página $X$ é calculado como $P(X)$.
Sendo que esse <em>score</em> é a probabilidade conjunta do <em>PageRank</em> ($P_r(X)$),
da relevância do conteúdo para o usuário ($P_c(X)$) e do idioma em que o texto
está escrito em relação ao idioma do usuário ($P_l(X)$).</p>
<p>Em alguns casos não a distinção entre <em>votes</em>, <em>scores</em> e <em>ranks</em> não é muito clara.
Por exemplo, o <a href=https://en.wikipedia.org/wiki/Borda_count>método de Borda</a> é um sistema
de votos que organiza o resultado pelo item com melhor <em>score</em>.
Assim, existe o <em>vote</em> (o que cada usuário atribuiu para um item),
o <em>score</em> (calculado a partir dos <em>votes</em> dos usuários),
e um <em>ranking</em> final a partir dos <em>scores</em>.</p>
<p><strong>Exemplo do método de Borda.</strong> <a href="https://docs.google.com/presentation/d/1jfpqVZpZDjNT05fUhoa55VZpXN4aujSQO5PZKk0Fd2Q/edit#slide=id.g136fe2f640_0_40">Fonte</a>.</p>
<table>
<thead>
<tr>
<th>Item / Usuário</th>
<th>Usuário A</th>
<th>Usuário B</th>
<th>Usuário C</th>
<th>Usuário D</th>
<th>Total / Ordem</th>
</tr>
</thead>
<tbody>
<tr>
<td>Filme A</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>Filme B</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>8</td>
</tr>
<tr>
<td>Filme C</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>12</td>
</tr>
<tr>
<td>Filme D</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>3</td>
<td>16</td>
</tr>
<tr>
<td>Filme E</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>5</td>
<td>19</td>
</tr>
</tbody>
</table>
<p>No exemplo acima, cada usuário votou em um filme com uma nota de 1 à 5
(que é a ordem de preferência).
Portanto, se existirem <em>N</em> filmes, o usuário teria que votar entre 1 e <em>N</em>.
Outro detalhe é que o resultado final para um determinado filme é a simples soma
dos votos de cada usuário.</p>
<p>No método de Borda só é necessário tomar cuidado porque os votos em posições centrais
tendem a ter mais incerteza que os primeiros e últimos.
Ou seja, existe maior certeza no que o usuário gosta e não gosta, mas os itens
intermediários tem mais incerteza.</p>
<p>Ao trabalhar com <em>ranks</em> uma informação que pode ser importante é a correlação entre os usuários.
Por exemplo, um item que é sempre muito bem avaliado é melhor que um item com avaliações boas e ruins.
Para isso, uma estatística de correlação como o
<a href=https://en.wikipedia.org/wiki/Intraclass_correlation><em>ICC(3, 1)</em></a>
pode ser melhor que a correlação de Pearson.</p>
<h2 id=outras-ideias-para-_ranks_>Outras ideias para <em>ranks</em></h2>
<p>Se o conjunto de dados a ser ordenado é composto por comparações binárias (A > B, B > C, A > C),
é possível utilizar a
<a href=https://en.wikipedia.org/wiki/Topological_sorting>ordenação topológica de um grafo</a>.
Outra opção é o método <a href=https://en.wikipedia.org/wiki/Elo_rating_system><em>Elo Ranking</em></a>,
que parte de uma expectativa entre os elementos
envolvidos na comparação e ajusta o resultado com base no resultado.
Exemplo (algo comum em jogos):</p>
<ul>
<li><em>A</em> ganha de <em>B</em> e <em>B</em> ganha de <em>C</em></li>
<li>Por transitividade, <em>A</em> ganha de <em>C</em> (tem o <em>ranking</em> melhor)</li>
<li>Porém, se o resultado entre <em>A</em> e <em>B</em> foi inesperado (<em>B</em> deveria ganhar pela série histórica)</li>
<li>A condição <em>A</em> ganha de <em>C</em> não é uma total certeza</li>
<li>Portanto, é necessário que levar em consideração um &ldquo;fator de sorte&rdquo;</li>
</ul>
<p>Outro detalhe importante sobre <em>ranks</em> é que
<a href=http://www.evanmiller.org/how-not-to-sort-by-average-rating.html>a ordem não deveria ser calculada pela média</a></p>
<h2 id=propriedades-desejadas-em-funções-de-_score_>Propriedades desejadas em funções de <em>score</em></h2>
<ul>
<li>Fáceis de entender e calcular</li>
<li>Interpretação monotônica das variáveis (variáveis aumentam de valor, o <em>score</em> também aumenta)</li>
<li>Funciona com <em>outliers</em> (ao menos de forma satisfatória)</li>
<li>As diferenças devem ser normalizadas (<a href=https://en.wikipedia.org/wiki/Standard_score><em>Z-scores</em></a> são um bom exemplo)</li>
</ul>
<h2 id=cuidados-com-sistemas-de-votos>Cuidados com sistemas de votos</h2>
<p>Existem algumas propriedades desejadas em sistemas de votos
que tornam os <em>ranks</em> difíceis.
Algumas são:</p>
<ul>
<li>Se todos os votos preferem <em>A</em> sobre <em>B</em>, então <em>A</em> deve ter um <em>rank</em> melhor que <em>B</em></li>
<li>Transitividade: Se <em>A</em> > <em>B</em> e <em>B</em> > <em>C</em>, então <em>A</em> > <em>C</em></li>
<li><a href="https://docs.google.com/presentation/d/1jfpqVZpZDjNT05fUhoa55VZpXN4aujSQO5PZKk0Fd2Q/edit#slide=id.g173bac2a5c_0_99">Outras</a></li>
</ul>
<p>Entretanto, todas as propriedades não podem ser atendidas ao mesmo tempo.
Essa é a conclusão do <a href=https://en.wikipedia.org/wiki/Arrow%27s_impossibility_theorem>Teorema da impossibilidade de Arrow</a> (<a href="https://www.youtube.com/watch?v=AhVR7gFMKNg">um vídeo explicando</a>).
Portanto, é necessário escolher as preferências desejadas ao montar um sistema de <em>votes</em> e <em>ranks</em>
para atender as demandas necessárias.
Com base nessas escolhas, também será possível escolher o método de <em>rank</em>.
Por exemplo, a transitividade é uma &ldquo;propriedade violada&rdquo; pelo <em>Elo Ranking</em>.</p>
<h2 id=_scores_-ou-_ranks_><em>Scores</em> ou <em>Ranks</em></h2>
<p>A diferença entre apresentar um <em>score</em> ou um <em>rank</em> vai do que se deseja apresentar.
Uma pequena variação no <em>score</em> pode ser uma mudança significativa no <em>rank</em>.
Se o resultado isolado faz sentido, apenas um <em>score</em> é suficiente.
Caso contrário, incluir o <em>rank</em> ajuda na aprensetação.</p>
</div>
<meta itemprop=wordCount content="819">
<meta itemprop=datePublished content="2019-05-10">
<meta itemprop=url content="https://juliocesarbatista.com/post/votes-scores-ranks/">
</article>
<ul class=pagination role=navigation aria-label=Pagination>
<li class=arrow aria-disabled=true><a href=https://juliocesarbatista.com/post/data-cleaning/>&#171; <em>Previous<span class=show-for-sr> page</span></em>: Limpando dados (data cleaning)</a></li>
<li class=arrow aria-disabled=true><a href=https://juliocesarbatista.com/post/combinatoria/><em>Next<span class=show-for-sr> page</span></em>: Técnicas de combinatória&nbsp;&#187;</a></li>
</ul>
</div>
</div>
</main>
<footer>
<hr>
<div class=row>
<div class="column small-10 small-centered text-center">
<em>Gostou ou tem algum comentário? Vamos conversar no <span class=nowrap><i class="fa fa-twitter-square"></i> Twitter</span>, <a href=http://twitter.com/ejuliobatista>@ejuliobatista</a>!</em>
</div>
</div>
</footer>
<div class=endofpage>
</div>
<script src=https://juliocesarbatista.com/js/jquery.js></script>
<script src=https://juliocesarbatista.com/js/what-input.js></script>
<script src=https://juliocesarbatista.com/js/foundation.min.js></script>
<script src=https://juliocesarbatista.com/js/finite.js></script>
<script src=https://juliocesarbatista.com/js/highlight.pack.js></script>
<script>hljs.initHighlightingOnLoad()</script>
<script type=text/x-mathjax-config>
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          processEscapes: true
        }
      });
    </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script>
</body>
</html>